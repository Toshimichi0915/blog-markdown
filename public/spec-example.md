# nations

建国・領地の拡大及び戦争ができるプラグイン

## 概要

プレイヤーはコマンドを使用して国を作ることができる。国は1人以上のプレイヤー及び1つ以上の所有チャンクによって構成される。国を作ることで、以下の追加要素が使用可能になる。

* 戦争を行う
* 保護されたチャンク内で建築を行う
* 所有チャンクを拡大する

上記全ての追加要素は以下に述べるコマンドを介して利用可能である。

## コマンド

| コマンド名 | 詳細 |
| --- | --- |
| /nation new <国の名前> | 国を作る |
| /nation delete <国の名前> | 国を消す |
| /nation invite <プレイヤー> | プレイヤーを国に招待する |
| /nation accept <プレイヤー> | 招待を受け入れる |
| /nation deny <プレイヤー> | 招待を断る |
| /nation war <国の名前> | 戦争を始める |
| /nation claim | 立っているチャンクを所有する |

詳細については以下の通り。

* 国を作る際、既に同じ名前の国が存在している場合にはエラーメッセージを表示する。
* 国への招待は10分間有効で、その10分の間は再度招待を送ることができない。
* 国への招待を断った場合、その国のプレイヤーは再度招待を送るために1日待たなくてはならない。
* 既に戦争中の国に対して戦争を仕掛けることはできない。
* 既に他の国に所有されているチャンクは所有することができない。

## 戦争

```
/nation war <国の名前>
```

国に所属しているプレイヤーが上のコマンドを打つことで、全体メッセージを表示した後に戦争を開始する。戦争はコマンドを打ってから10日間続き、その間双方の所有するチャンクにおいてプレイヤーに対する攻撃の保護が無効になる。また戦争中、プレイヤーが敵国のプレイヤーに殺されると、殺されたプレイヤーが所属する国のチャンクが一つランダムで敵プレイヤーの所属する国に渡る。

10日過ぎた後、再び全体メッセージが表示されて戦争が終わる。戦争が終わると、プレイヤーに対する攻撃の保護が再度有効になる。

## 保護

国の所有するチャンク内では、その国に所属するプレイヤー及びチャンク内のブロックに対する保護が有効になる。保護されたチャンク内でその国に所属しないプレイヤーができない行為の一覧は以下の通り。

* ブロックを破壊する。
* 溶岩・水を流す。
* ピストンでブロックを動かす
* レッドストーンを作動する。これはレバー等、オブザーバーで検知可能なドアやフェンスゲートも含まれる。
* 領地内のいかなるプレイヤーに攻撃する。

## 保存形式

国の情報はサーバー内ディレクトリ

```
plugins/Nations/nations/
```

にJSON形式で保存される。また削除された国は

```
plugins/Nations/nations/archive/
```

に保存される。archiveディレクトリに入った国はプラグインからロードされず削除状態として扱われるが、archiveディレクトリから取り出すことで再び国として機能させることが可能である。

国の情報は以下のようなのJSONフォーマットで保存される。

```json
{
    "id": 0,
    "members": [
        "353b89b8-28d7-49d9-b6e3-a011860e0e99",
        "09312b6f-75d4-4d9b-8563-434833aeb358"
    ],
    "regions": [
        {
            "x": 0,
            "z": 2
        },
        {
            "x": 1,
            "z": 2
        }
    ]
}
```

| フィールド名 | 説明 |
| --- | --- |
| id | 国のID |
| members | 国に所属するプレイヤーのUUID一覧 |
| regions | 国の所有するチャンク一覧 |
